(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d0407"],{"66d5":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"table-page"},[t("div",{staticClass:"queryInfo"},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{sm:8,md:6,lg:4}},[t("el-input",{attrs:{size:"small",placeholder:"请输入门店编号"},model:{value:e.queryInfo.shopCode,callback:function(t){e.$set(e.queryInfo,"shopCode",t)},expression:"queryInfo.shopCode"}})],1),t("el-col",{attrs:{sm:8,md:6,lg:4}},[t("el-input",{attrs:{size:"small",placeholder:"请输入门店名称"},model:{value:e.queryInfo.shopName,callback:function(t){e.$set(e.queryInfo,"shopName",t)},expression:"queryInfo.shopName"}})],1),t("el-col",{attrs:{span:1,xs:4}},[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.handleSizeChange()}}},[e._v("搜索")])],1),t("el-col",{attrs:{span:1,xs:4}},[t("el-button",{attrs:{size:"small"},on:{click:function(t){return e.reset_query()}}},[e._v("重置")])],1)],1)],1),t("div",{staticClass:"main_list"},[t("div",{staticClass:"button_group"},[t("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"add",expression:"'add'"}],attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:function(t){return e.showDialogAdd(0)}}},[e._v("新增")]),t("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"del",expression:"'del'"}],attrs:{type:"danger",icon:"el-icon-delete",size:"small"},on:{click:function(t){return e.remove(0)}}},[e._v("删除")])],1),t("el-table",{attrs:{border:"",size:"small","row-key":"id",data:e.tableData},on:{"selection-change":e.selectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"55"}}),t("el-table-column",{attrs:{prop:"merchantCode",label:"商户编号","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"merchantName",label:"商户名称","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"shopCode",label:"门店编号","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"shopName",label:"门店名称","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"onlineHours",label:"门店营业时间","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"onlineArea",label:"门店营业面积","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"phone",label:"门店电话","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"onlineMph",label:"门牌号","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"状态",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){var o=a.row;return[t("el-switch",{attrs:{"active-value":"true","inactive-value":"false","active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(t){return e.changeEna(o)}},model:{value:o.state,callback:function(t){e.$set(o,"state",t)},expression:"row.state"}})]}}])}),t("el-table-column",{attrs:{label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(e._f("dateFormat")(a.create_time))+" ")]}}])}),t("el-table-column",{attrs:{label:"修改时间"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(e._f("dateFormat")(a.update_time))+" ")]}}])}),t("el-table-column",{attrs:{label:"操作",width:"155"},scopedSlots:e._u([{key:"default",fn:function(a){var o=a.row;return[t("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"update",expression:"'update'"}],staticClass:"textyell",attrs:{type:"text",size:"mini"},on:{click:function(t){return e.showDialogAdd(o)}}},[e._v("修改")]),t("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"del",expression:"'del'"}],staticClass:"textRed",attrs:{type:"text",size:"mini"},on:{click:function(t){return e.remove(o.code)}}},[e._v("删除")])]}}])})],1),t("el-pagination",{attrs:{"hide-on-single-page":"","current-page":e.queryInfo.pageNum,"page-sizes":[15,20,30],"page-size":e.queryInfo.pageSize,layout:"sizes, prev, pager, next,total",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),t("el-dialog",{attrs:{title:e.dialog.title,visible:e.dialog.show,"close-on-click-modal":!1,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){return e.$set(e.dialog,"show",t)}}},[t("el-form",{ref:"addFormData",attrs:{model:e.addFormData,rules:e.formRules,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"商户名称",prop:"merchantId"}},[t("el-select",{model:{value:e.addFormData.merchantId,callback:function(t){e.$set(e.addFormData,"merchantId",t)},expression:"addFormData.merchantId"}},e._l(e.merList,(function(e){return t("el-option",{key:e.code,attrs:{label:e.merchantName,value:e.code}})})),1)],1),t("el-form-item",{attrs:{label:"门店编号",prop:"shopCode"}},[t("el-input",{model:{value:e.addFormData.shopCode,callback:function(t){e.$set(e.addFormData,"shopCode",t)},expression:"addFormData.shopCode"}})],1),t("el-form-item",{attrs:{label:"门店名称",prop:"shopName"}},[t("el-input",{model:{value:e.addFormData.shopName,callback:function(t){e.$set(e.addFormData,"shopName",t)},expression:"addFormData.shopName"}})],1),t("el-form-item",{attrs:{label:"门店LOGO",prop:"shopLogo"}},[t("el-input",{model:{value:e.addFormData.shopLogo,callback:function(t){e.$set(e.addFormData,"shopLogo",t)},expression:"addFormData.shopLogo"}})],1),t("el-form-item",{attrs:{label:"门店电话",prop:"phone"}},[t("el-input",{model:{value:e.addFormData.phone,callback:function(t){e.$set(e.addFormData,"phone",t)},expression:"addFormData.phone"}})],1),t("el-form-item",{attrs:{label:"门店营业时间",prop:"onlineHours"}},[t("el-input",{model:{value:e.addFormData.onlineHours,callback:function(t){e.$set(e.addFormData,"onlineHours",t)},expression:"addFormData.onlineHours"}})],1),t("el-form-item",{attrs:{label:"门店营业面积",prop:"onlineArea"}},[t("el-input",{model:{value:e.addFormData.onlineArea,callback:function(t){e.$set(e.addFormData,"onlineArea",t)},expression:"addFormData.onlineArea"}})],1),t("el-form-item",{attrs:{label:"门牌号",prop:"onlineMph"}},[t("el-input",{model:{value:e.addFormData.onlineMph,callback:function(t){e.$set(e.addFormData,"onlineMph",t)},expression:"addFormData.onlineMph"}})],1),t("el-form-item",{attrs:{label:"宣传画廊",prop:"shopUrls"}},[t("el-input",{model:{value:e.addFormData.shopUrls,callback:function(t){e.$set(e.addFormData,"shopUrls",t)},expression:"addFormData.shopUrls"}})],1),t("el-form-item",{attrs:{label:"门店简介",prop:"shopDesc"}},[t("el-input",{model:{value:e.addFormData.shopDesc,callback:function(t){e.$set(e.addFormData,"shopDesc",t)},expression:"addFormData.shopDesc"}})],1),t("el-form-item",{attrs:{label:"门店类型",prop:"shopType"}},[t("el-select",{model:{value:e.addFormData.shopType,callback:function(t){e.$set(e.addFormData,"shopType",t)},expression:"addFormData.shopType"}},[t("el-option",{attrs:{label:"租赁",value:"1"}}),t("el-option",{attrs:{label:"自营",value:"2"}}),t("el-option",{attrs:{label:"联营",value:"3"}}),t("el-option",{attrs:{label:"无",value:"9"}})],1)],1),t("el-form-item",{attrs:{label:"备注",prop:"remark"}},[t("el-input",{model:{value:e.addFormData.remark,callback:function(t){e.$set(e.addFormData,"remark",t)},expression:"addFormData.remark"}})],1),t("el-form-item",{attrs:{label:"状态"}},[t("el-select",{model:{value:e.addFormData.state,callback:function(t){e.$set(e.addFormData,"state",t)},expression:"addFormData.state"}},[t("el-option",{attrs:{label:"启用",value:!0}}),t("el-option",{attrs:{label:"禁用",value:!1}})],1)],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.save_mer}},[e._v("确 定")])],1)],1)],1)},r=[],l=a("2909"),s=a("c7eb"),n=a("1da1"),i=a("5530"),c=(a("d3b7"),a("159b"),a("ed08")),d=a("2f62"),u=a("4360"),p={data:function(){return{total:0,pickerOptions:{disabledDate:function(e){return e.getTime()>Date.now()}},dialog:{title:"新增",show:!1},queryInfo:{orgID:u["a"].state["user"].userInfo.orgID,pageSize:15,pageNum:1},merList:[],tableData:[],check:[],addFormData:{state:!1},formRules:{shopCode:[{required:!0,message:"请输入门店编号",trigger:"blur"}],shopName:[{required:!0,message:"请输入门店名称",trigger:"blur"}]},dialogVisible:!1}},computed:{},mounted:function(){this.getMerData(),this.seach_query()},methods:Object(i["a"])(Object(i["a"])({},Object(d["b"])("shop",["getShopList","shopState","saveShop","delShop","getMerAll"])),{},{seach_query:function(){var e=this;return Object(n["a"])(Object(s["a"])().mark((function t(){var a;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object(c["d"])("加载中"),t.next=3,e.getShopList(Object(i["a"])({},e.queryInfo));case 3:a=t.sent,e.tableData=a.data,e.total=a.count;case 6:case"end":return t.stop()}}),t)})))()},getMerData:function(){var e=this;return Object(n["a"])(Object(s["a"])().mark((function t(){var a;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getMerAll({orgID:e.queryInfo.orgID});case 2:a=t.sent,e.merList=a.data;case 4:case"end":return t.stop()}}),t)})))()},beforeHandleCommand:function(e,t){return{row:e,command:t}},selectionChange:function(e){this.check=Object(l["a"])(e)},showDialogAdd:function(e){e?(this.addFormData=Object(i["a"])({},e),this.addFormData.state="true"==this.addFormData.state,this.dialog.title="修改"):(this.dialog.title="新增",this.addFormData.state=!1,this.addFormData.roleType=1),this.dialog.show=!0},editRole:function(){if(1!=this.check.length)return Object(c["c"])("请选择一条要修改的门店");this.dialog.title="修改",this.addFormData=Object(i["a"])({},this.check[0]),this.addFormData.state="true"==this.addFormData.state,this.dialog.show=!0},save_mer:function(){var e=this;this.$refs["addFormData"].validate(function(){var t=Object(n["a"])(Object(s["a"])().mark((function t(a){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return",!1);case 2:return Object(c["d"])(!0),e.addFormData.orgID=u["a"].state["user"].userInfo.orgID,t.next=6,e.saveShop(e.addFormData);case 6:e.handleClose();case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},changeEna:function(e){var t=this;return Object(n["a"])(Object(s["a"])().mark((function a(){return Object(s["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.shopState({code:e.code});case 2:t.seach_query();case 3:case"end":return a.stop()}}),a)})))()},modify:function(){},remove:function(e){var t=this;if(!e&&!this.check.length)return Object(c["c"])("请选择要删除的门店");Object(c["a"])("确认删除","提示",{ok:function(){var a=Object(n["a"])(Object(s["a"])().mark((function a(){var o;return Object(s["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return Object(c["d"])("正在删除"),o=[],t.check.forEach((function(e){o+=e.code+","})),a.next=5,t.delShop({codes:e||o});case 5:t.seach_query();case 6:case"end":return a.stop()}}),a)})));function o(){return a.apply(this,arguments)}return o}()})},reset_query:function(){this.queryInfo={orgID:u["a"].state["user"].userInfo.orgID,pageSize:15,pageNum:1,sort:{prop:"create_time",order:"desc"}},this.seach_query()},handleClose:function(){this.dialog.show=!1,this.addFormData={ena:1},this.seach_query()},handleSizeChange:function(e){this.queryInfo.pageSize=e,this.seach_query()},handleCurrentChange:function(e){this.queryInfo.pageNum=e,this.seach_query()}})},m=p,h=a("2877"),f=Object(h["a"])(m,o,r,!1,null,null,null);t["default"]=f.exports}}]);