(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d20ed79"],{b0a6:function(e,t,a){"use strict";a.r(t);a("caad");var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"table-page"},[t("div",{staticClass:"queryInfo"},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{sm:8,md:6,lg:4}},[t("el-input",{attrs:{size:"small",placeholder:"请输入名称"},model:{value:e.queryInfo.params.fileName,callback:function(t){e.$set(e.queryInfo.params,"fileName",t)},expression:"queryInfo.params.fileName"}})],1),t("el-col",{attrs:{sm:8,md:6,lg:4}},[t("el-select",{attrs:{size:"small",clearable:"",placeholder:"文件类型"},model:{value:e.queryInfo.params.fileType,callback:function(t){e.$set(e.queryInfo.params,"fileType",t)},expression:"queryInfo.params.fileType"}},[t("el-option",{attrs:{label:"音视频",value:"mp4"}}),t("el-option",{attrs:{label:"图片",value:"img"}}),t("el-option",{attrs:{label:"文件",value:"file"}})],1)],1),t("el-col",{attrs:{span:2,xs:4}},[t("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"query",expression:"'query'"}],attrs:{type:"primary",size:"small"},on:{click:function(t){return e.handleSizeChange()}}},[e._v("搜索")])],1),t("el-col",{attrs:{span:2,xs:4}},[t("el-button",{attrs:{size:"small"},on:{click:function(t){return e.reset_query()}}},[e._v("重置")])],1)],1)],1),t("div",{staticClass:"main_list"},[t("div",{staticClass:"button_group flex"},[t("el-upload",{directives:[{name:"permission",rawName:"v-permission",value:"add",expression:"'add'"}],attrs:{action:"",multiple:!1,"http-request":e._uploadImg,"show-file-list":!1}},[t("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"add",expression:"'add'"}],attrs:{type:"primary",icon:"el-icon-plus",size:"small"}},[e._v("上传文件")])],1)],1),t("el-table",{attrs:{border:"",size:"small","row-key":"id",data:e.tableData}},[t("el-table-column",{attrs:{prop:"fileName",label:"文件名称","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"fileType",label:"文件类型",width:"100",align:"center"}}),t("el-table-column",{attrs:{prop:"fileSize",label:"文件大小",width:"100",align:"center"}}),t("el-table-column",{attrs:{label:"预览",align:"center",width:"320"},scopedSlots:e._u([{key:"default",fn:function(a){var i=a.row;return[["png","jpg","gif","jpeg","jfif"].includes(i.fileType)?t("el-image",{staticStyle:{width:"50px",height:"50px"},attrs:{fit:"fill",src:i.fileUrl,"preview-src-list":[i.fileUrl]}}):e._e(),["mp3"].includes(i.fileType)?t("audio",{staticStyle:{width:"300px"},attrs:{controls:""}},[t("source",{attrs:{src:i.fileUrl}})]):e._e(),["mp4","m4a"].includes(i.fileType)?t("div",[t("el-button",{attrs:{size:"mini",type:"info",plain:""},on:{click:function(t){return e.videoPlay(i)}}},[e._v("播放")])],1):e._e()]}}])}),t("el-table-column",{attrs:{prop:"remark",label:"备注","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"username",label:"上传用户","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"上传时间",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(e._f("dateFormat")(a.create_time))+" ")]}}])}),t("el-table-column",{attrs:{label:"操作",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){var i=a.row;return[t("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"download",expression:"'download'"}],attrs:{type:"text",size:"mini"},on:{click:function(t){return e.download(i.code)}}},[e._v("下载")]),t("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"delete",expression:"'delete'"}],staticClass:"textRed",attrs:{type:"text",size:"mini"},on:{click:function(t){return e.remove(i)}}},[e._v("删除")])]}}])})],1),t("el-pagination",{attrs:{"hide-on-single-page":"","current-page":e.queryInfo.offset,"page-sizes":[10,20,30],"page-size":e.queryInfo.limit,layout:"sizes, prev, pager, next,total",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),t("el-dialog",{attrs:{top:"5vh",visible:e.dialogVisible,"before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",{staticClass:"video-css"},[e.dialogVisible?t("video-js",{attrs:{options:e.dialogData}}):e._e()],1)])],1)},s=[],l=a("2909"),r=a("c7eb"),n=a("1da1"),o=a("5530"),c=a("2f62"),u=a("ed08"),p=(a("562c"),a("4360")),d={data:function(){return{total:0,queryInfo:{params:{orgID:p["a"].state["user"].userInfo.orgID},limit:8,offset:1,sort:{prop:"create_Time",order:"desc"}},tableData:[],dialogData:{},dialogVisible:!1}},mounted:function(){this.seach_query()},methods:Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(c["b"])("resources",["fileUpload"])),Object(c["b"])("system",["fileList","flieRome","fileDownload"])),{},{seach_query:function(){var e=this;return Object(n["a"])(Object(r["a"])().mark((function t(){var a;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object(u["d"])("加载中"),t.next=3,e.fileList(Object(o["a"])({},e.queryInfo));case 3:a=t.sent,e.tableData=a.data,e.total=a.count;case 6:case"end":return t.stop()}}),t)})))()},_uploadImg:function(e){var t=this;return Object(n["a"])(Object(r["a"])().mark((function a(){var i;return Object(r["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=e.file,e.onError,e.onSuccess,a.next=3,t.fileUpload({file:i});case 3:t.seach_query();case 4:case"end":return a.stop()}}),a)})))()},remove:function(e){var t=this;Object(u["a"])("确认删除","提示",{ok:function(){var a=Object(n["a"])(Object(r["a"])().mark((function a(){return Object(r["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return Object(u["d"])("正在删除"),a.next=3,t.flieRome({codes:e.code});case 3:t.seach_query();case 4:case"end":return a.stop()}}),a)})));function i(){return a.apply(this,arguments)}return i}()})},download:function(e){var t=this;return Object(n["a"])(Object(r["a"])().mark((function a(){return Object(r["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.fileDownload(e);case 2:a.sent;case 3:case"end":return a.stop()}}),a)})))()},videoPlay:function(e){this.dialogData=Object(o["a"])({},e),this.dialogVisible=!0},show_file:function(e){this.fileUrl=e,this.showFile=!0},handleClose:function(){this.dialogVisible=!1},selectionChange:function(e){this.check=Object(l["a"])(e)},reset_query:function(){this.queryInfo={params:{orgID:p["a"].state["user"].userInfo.orgID},limit:8,offset:1,sort:{prop:"create_time",order:"desc"}}},dialogClose:function(){this.dialog.show=!1,this.addFormData={},this.$refs["addFormData"].resetFields(),this.seach_query()},handleSizeChange:function(e){this.queryInfo.limit=e||this.queryInfo.limit,this.queryInfo.offset=1,this.seach_query()},handleCurrentChange:function(e){this.queryInfo.offset=e,this.seach_query()}})},f=d,m=a("2877"),h=Object(m["a"])(f,i,s,!1,null,null,null);t["default"]=h.exports}}]);