(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0f93202e"],{"466d":function(e,o,n){"use strict";var t=n("c65b"),l=n("d784"),i=n("825a"),c=n("7234"),a=n("50c4"),r=n("577e"),s=n("1d80"),u=n("dc4a"),m=n("8aa5"),d=n("14c3");l("match",(function(e,o,n){return[function(o){var n=s(this),l=c(o)?void 0:u(o,e);return l?t(l,o,n):new RegExp(o)[e](r(n))},function(e){var t=i(this),l=r(e),c=n(o,t,l);if(c.done)return c.value;if(!t.global)return d(t,l);var s=t.unicode;t.lastIndex=0;var u,p=[],f=0;while(null!==(u=d(t,l))){var b=r(u[0]);p[f]=b,""===b&&(t.lastIndex=m(l,a(t.lastIndex),s)),f++}return 0===f?null:p}]}))},"93b8":function(e,o,n){"use strict";n.r(o);n("fb6a");var t=function(){var e=this,o=e._self._c;return o("div",{staticClass:"table-page"},[o("div",{staticClass:"queryInfo"},[o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{sm:8,md:6,lg:4}},[o("el-input",{attrs:{clearable:"",size:"small",placeholder:"请输入菜单名称"},model:{value:e.queryInfo.params.title,callback:function(o){e.$set(e.queryInfo.params,"title",o)},expression:"queryInfo.params.title"}})],1),o("el-col",{attrs:{sm:8,md:6,lg:4}},[o("el-select",{attrs:{size:"small",clearable:"",placeholder:"请选择菜单状态"},model:{value:e.queryInfo.params.lever,callback:function(o){e.$set(e.queryInfo.params,"lever",o)},expression:"queryInfo.params.lever"}},[o("el-option",{attrs:{label:"目录",value:"1"}}),o("el-option",{attrs:{label:"页面",value:"2"}}),o("el-option",{attrs:{label:"按钮",value:"3"}})],1)],1),o("el-col",{attrs:{span:2,xs:4}},[o("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"query",expression:"'query'"}],attrs:{type:"primary",size:"small"},on:{click:function(o){return e.seach_query()}}},[e._v("搜索")])],1),o("el-col",{attrs:{span:2,xs:4}},[o("el-button",{attrs:{size:"small"},on:{click:function(o){return e.reset_query()}}},[e._v("重置")])],1)],1)],1),o("div",{staticClass:"main_list"},[o("div",{staticClass:"button_group"},[o("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"add",expression:"'add'"}],attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:function(o){return e.showDialogAdd(0)}}},[e._v("新增")]),o("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(o){e.isFold=!e.isFold}}},[o("i",{staticClass:"el-icon-sort",staticStyle:{transform:"rotate(90deg)"}}),e._v(" 展开/折叠")])],1),e.menuTable?o("el-table",{ref:"menuTable",attrs:{border:"",content:"content",size:"small","row-key":"id",data:e.tableData,"default-expand-all":e.isFold}},[o("el-table-column",{attrs:{label:"菜单名称"},scopedSlots:e._u([{key:"default",fn:function(n){var t=n.row;return[o("span",{staticClass:"ak-svg-icon"},[t.icon?o("svg-icon",{attrs:{icon:t.icon}}):e._e()],1),e._v(" "+e._s(t.title)+" ")]}}],null,!1,1582156145)}),o("el-table-column",{attrs:{prop:"path",label:"菜单路径","show-overflow-tooltip":""}}),o("el-table-column",{attrs:{prop:"authority",label:"权限标识","show-overflow-tooltip":""}}),o("el-table-column",{attrs:{prop:"orderNum",label:"排序",width:"80",align:"center"}}),o("el-table-column",{attrs:{label:"类型",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){var t=n.row;return[1==t.lever?o("el-tag",{attrs:{effect:"dark",type:"success"}},[e._v("目录")]):e._e(),2==t.lever?o("el-tag",{attrs:{effect:"dark"}},[e._v("页面")]):e._e(),3==t.lever?o("el-tag",{attrs:{type:"warning",effect:"dark"}},[e._v("按钮")]):e._e()]}}],null,!1,2786481233)}),o("el-table-column",{attrs:{label:"种类",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){var t=n.row;return[1==t.menuClass?o("el-tag",{attrs:{effect:"dark",type:"success"}},[e._v("管理端")]):e._e(),2==t.menuClass?o("el-tag",{attrs:{effect:"dark",type:"warning"}},[e._v("自助收银端")]):e._e()]}}],null,!1,2448110140)}),o("el-table-column",{attrs:{label:"可用",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){var t=n.row;return[o("el-switch",{directives:[{name:"permission",rawName:"v-permission",value:"state",expression:"'state'"}],attrs:{"active-value":!0,"inactive-value":!1,"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(o){return e.changeEna(t)}},model:{value:t.state,callback:function(o){e.$set(t,"state",o)},expression:"row.state"}})]}}],null,!1,1316385567)}),o("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(n){var t=n.row;return[o("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"update",expression:"'update'"}],staticClass:"textyell",attrs:{type:"text",size:"mini"},on:{click:function(o){return e.modify(t)}}},[e._v("修改")]),o("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"delete",expression:"'delete'"}],staticClass:"textRed",attrs:{type:"text",size:"mini"},on:{click:function(o){return e.romeMenu(t)}}},[e._v("删除")])]}}],null,!1,1240082104)})],1):e._e()],1),o("el-dialog",{attrs:{title:e.dialogData.title,visible:e.dialogVisible,"close-on-click-modal":!1,width:"40%","before-close":e.handleClose},on:{"update:visible":function(o){e.dialogVisible=o}}},[o("el-form",{ref:"menuForm",attrs:{model:e.menuForm,"status-icon":"",rules:e.menuRole,"label-width":"100px"}},[o("el-form-item",{attrs:{label:"上级菜单"}},[o("el-select",{ref:"el-tree-select",attrs:{disabled:e.dialogData.parent,clearable:"",placeholder:"请选择"},model:{value:e.menuForm.pid,callback:function(o){e.$set(e.menuForm,"pid",o)},expression:"menuForm.pid"}},[o("el-option",{attrs:{label:"主目录",value:1}}),o("el-option",{staticClass:"el-tree-select-option",attrs:{value:e.menuForm.pid,label:e.menuForm.parent_name}},[o("el-tree",{ref:"el-select-tree",staticClass:"el-tree-select-dropdown",attrs:{data:e.menuTree,"show-checkbox":"","node-key":"id","check-strictly":"","check-on-click-node":!1,"default-expanded-keys":[e.menuForm.pid],props:e.defaultProps},on:{check:e._check}})],1)],1)],1),o("el-form-item",{attrs:{label:"菜单种类",prop:"menuClass"}},[o("el-radio-group",{model:{value:e.menuForm.menuClass,callback:function(o){e.$set(e.menuForm,"menuClass",o)},expression:"menuForm.menuClass"}},[o("el-radio",{attrs:{label:1}},[e._v("管理端")]),o("el-radio",{attrs:{label:2}},[e._v("APP端")])],1)],1),o("el-form-item",{attrs:{label:"菜单类型",prop:"lever"}},[o("el-radio-group",{model:{value:e.menuForm.lever,callback:function(o){e.$set(e.menuForm,"lever",o)},expression:"menuForm.lever"}},[o("el-radio",{attrs:{label:1}},[e._v("目录")]),o("el-radio",{attrs:{label:2}},[e._v("页面")]),o("el-radio",{attrs:{label:3}},[e._v("按钮")])],1)],1),o("el-form-item",{attrs:{label:"菜单名称",prop:"title"}},[o("el-input",{model:{value:e.menuForm.title,callback:function(o){e.$set(e.menuForm,"title",o)},expression:"menuForm.title"}})],1),o("el-form-item",{attrs:{label:"菜单路径",prop:"path"}},[o("el-input",{model:{value:e.menuForm.path,callback:function(o){e.$set(e.menuForm,"path",o)},expression:"menuForm.path"}})],1),o("el-form-item",{attrs:{label:"权限标识",prop:"authority"}},[o("el-input",{model:{value:e.menuForm.authority,callback:function(o){e.$set(e.menuForm,"authority",o)},expression:"menuForm.authority"}})],1),o("el-form-item",{attrs:{label:"排序"}},[o("el-input",{attrs:{type:"number"},nativeOn:{keydown:function(o){return e.inputNamber.apply(null,arguments)}},model:{value:e.menuForm.orderNum,callback:function(o){e.$set(e.menuForm,"orderNum",o)},expression:"menuForm.orderNum"}})],1),o("el-form-item",{attrs:{label:"图标",prop:"icon"}},[o("el-select",{attrs:{filterable:"",clearable:""},model:{value:e.menuForm.icon,callback:function(o){e.$set(e.menuForm,"icon",o)},expression:"menuForm.icon"}},e._l(e.icons,(function(n,t){return o("el-option",{key:t,attrs:{label:n,value:n}},[o("span",{staticStyle:{float:"left"}},[e._v(e._s(n))]),o("span",{staticStyle:{"font-size":"24px",float:"right"}},[o("svg-icon",{staticClass:"ak-svg-icon",attrs:{icon:-1!=n.indexOf("svg-icon")?n.slice(9):n}})],1)])})),1)],1),o("el-form-item",{attrs:{label:"状态"}},[o("el-radio",{attrs:{label:!0},model:{value:e.menuForm.state,callback:function(o){e.$set(e.menuForm,"state",o)},expression:"menuForm.state"}},[e._v("显示")]),o("el-radio",{attrs:{label:!1},model:{value:e.menuForm.state,callback:function(o){e.$set(e.menuForm,"state",o)},expression:"menuForm.state"}},[e._v("隐藏")])],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.menuForm_serve}},[e._v("确 定")])],1)],1)],1)},l=[],i=n("c7eb"),c=n("1da1"),a=n("5530"),r=(n("4de4"),n("4e82"),n("d3b7"),n("ac1f"),n("00b4"),n("159b"),n("2f62")),s=n("ed08"),u=n("2909"),m=(n("99af"),n("d81d"),n("466d"),n("ddb0"),n("fcb1")),d=function(e){return e.keys()},p=/\.\/(.*)\.svg/,f=d(m).map((function(e){return"svg-icon-"+e.match(p)[1]})),b=[].concat(Object(u["a"])(f),["el-icon-platform-eleme","el-icon-delete-solid","el-icon-eleme","el-icon-c-scale-to-original","el-icon-sort-up","el-icon-sort-down","el-icon-upload","el-icon-goods","el-icon-video-pause","el-icon-video-play","el-icon-s-cooperation","el-icon-s-order","el-icon-s-platform","el-icon-s-unfold","el-icon-s-operation","el-icon-s-promotion","el-icon-s-home","el-icon-s-release","el-icon-s-ticket","el-icon-s-management","el-icon-s-open","el-icon-s-shop","el-icon-s-help","el-icon-s-goods","el-icon-s-marketing","el-icon-s-flag","el-icon-s-comment","el-icon-s-finance","el-icon-s-claim","el-icon-s-tools","el-icon-s-custom","el-icon-s-opportunity","el-icon-s-fold","el-icon-s-data","el-icon-s-check","el-icon-s-grid","el-icon-user-solid","el-icon-question","el-icon-warning","el-icon-remove","el-icon-info","el-icon-circle-plus","el-icon-picture","el-icon-location","el-icon-error","el-icon-success","el-icon-camera-solid","el-icon-d-caret","el-icon-message-solid","el-icon-menu","el-icon-star-on","el-icon-video-camera-solid","el-icon-phone","el-icon-more","el-icon-share","el-icon-caret-left","el-icon-caret-right","el-icon-caret-bottom","el-icon-caret-top","el-icon-date","el-icon-circle-close","el-icon-edit","el-icon-folder","el-icon-folder-opened","el-icon-folder-add","el-icon-folder-remove","el-icon-folder-delete","el-icon-folder-checked","el-icon-tickets","el-icon-document-remove","el-icon-document-delete","el-icon-document-copy","el-icon-document-checked","el-icon-document","el-icon-document-add","el-icon-printer","el-icon-paperclip","el-icon-download","el-icon-upload2","el-icon-takeaway-box","el-icon-camera","el-icon-search","el-icon-zoom-in","el-icon-zoom-out","el-icon-monitor","el-icon-attract","el-icon-mobile","el-icon-video-camera","el-icon-scissors","el-icon-umbrella","el-icon-headset","el-icon-brush","el-icon-data-line","el-icon-mouse","el-icon-coordinate","el-icon-magic-stick","el-icon-reading","el-icon-data-board","el-icon-pie-chart","el-icon-data-analysis","el-icon-collection-tag","el-icon-edit-outline","el-icon-film","el-icon-suitcase","el-icon-suitcase-1","el-icon-picture-outline-round","el-icon-picture-outline","el-icon-receiving","el-icon-collection","el-icon-files","el-icon-notebook-1","el-icon-notebook-2","el-icon-toilet-paper","el-icon-office-building","el-icon-school","el-icon-table-lamp","el-icon-house","el-icon-no-smoking","el-icon-smoking","el-icon-shopping-cart-full","el-icon-shopping-cart-1","el-icon-shopping-cart-2","el-icon-shopping-bag-1","el-icon-shopping-bag-2","el-icon-present","el-icon-box","el-icon-bank-card","el-icon-money","el-icon-coin","el-icon-wallet","el-icon-discount","el-icon-price-tag","el-icon-bicycle","el-icon-truck","el-icon-ship","el-icon-news","el-icon-help","el-icon-guide","el-icon-male","el-icon-female","el-icon-thumb","el-icon-cpu","el-icon-link","el-icon-connection","el-icon-open","el-icon-turn-off","el-icon-set-up","el-icon-chat-round","el-icon-chat-line-round","el-icon-chat-square","el-icon-chat-dot-round","el-icon-chat-dot-square","el-icon-chat-line-square","el-icon-message","el-icon-postcard","el-icon-position","el-icon-turn-off-microphone","el-icon-microphone","el-icon-close-notification","el-icon-bell","el-icon-bangzhu","el-icon-circle-plus-outline","el-icon-remove-outline","el-icon-circle-check","el-icon-time","el-icon-odometer","el-icon-crop","el-icon-aim","el-icon-switch-button","el-icon-full-screen","el-icon-copy-document","el-icon-star-off","el-icon-basketball","el-icon-football","el-icon-soccer","el-icon-baseball","el-icon-mic","el-icon-stopwatch","el-icon-medal-1","el-icon-medal","el-icon-trophy","el-icon-trophy-1","el-icon-first-aid-kit","el-icon-discover","el-icon-place","el-icon-location-outline","el-icon-location-information","el-icon-add-location","el-icon-delete-location","el-icon-map-location","el-icon-alarm-clock","el-icon-timer","el-icon-watch-1","el-icon-watch","el-icon-wind-power","el-icon-light-rain","el-icon-lightning","el-icon-heavy-rain","el-icon-sunrise","el-icon-sunrise-1","el-icon-sunset","el-icon-sunny","el-icon-cloudy","el-icon-partly-cloudy","el-icon-cloudy-and-sunny","el-icon-moon","el-icon-moon-night","el-icon-bottom-left","el-icon-bottom-right","el-icon-bottom","el-icon-back","el-icon-right","el-icon-top-left","el-icon-top-right","el-icon-top","el-icon-lock","el-icon-unlock","el-icon-user","el-icon-key","el-icon-arrow-up","el-icon-arrow-right","el-icon-arrow-down","el-icon-arrow-left","el-icon-d-arrow-left","el-icon-d-arrow-right","el-icon-close","el-icon-check","el-icon-plus","el-icon-minus","el-icon-delete","el-icon-sold-out","el-icon-sell","el-icon-service","el-icon-mobile-phone","el-icon-sort","el-icon-rank","el-icon-refresh","el-icon-loading","el-icon-view","el-icon-finished","el-icon-more-outline","el-icon-phone-outline","el-icon-setting","el-icon-warning-outline","el-icon-refresh-right","el-icon-refresh-left","el-icon-dish","el-icon-dish-1","el-icon-food","el-icon-chicken","el-icon-fork-spoon","el-icon-knife-fork","el-icon-burger","el-icon-tableware","el-icon-sugar","el-icon-dessert","el-icon-ice-cream","el-icon-hot-water","el-icon-water-cup","el-icon-coffee-cup","el-icon-cold-drink","el-icon-goblet","el-icon-goblet-full","el-icon-goblet-square","el-icon-goblet-square-full","el-icon-refrigerator","el-icon-grape","el-icon-watermelon","el-icon-cherry","el-icon-apple","el-icon-pear","el-icon-orange","el-icon-coffee","el-icon-ice-tea","el-icon-ice-drink","el-icon-milk-tea","el-icon-potato-strips","el-icon-lollipop","el-icon-ice-cream-square","el-icon-ice-cream-round"]),h=b,v=n("562c"),g=n("4360"),k={name:"menuManage",data:function(){return{isFold:!1,menuTable:!0,menuData:[],tableData:[],menuTree:null,queryInfo:{params:{orgID:g["a"].state["user"].userInfo.orgID},limit:9999,offset:1},dialogVisible:!1,dialogData:{title:"新增",parent:!1},menuForm:{},menuRole:{lever:[{required:!0,message:"请选择菜单类型",trigger:"change"}],title:[{required:!0,message:"请输入菜单名称",trigger:"blur"}],path:[{required:!0,message:"请输入菜单路径",trigger:"blur"}]},defaultProps:{children:"children",label:"title"}}},computed:{icons:function(){return h}},watch:{isFold:function(){var e=this;this.menuTable=!1,this.$nextTick((function(){e.menuTable=!0}))},"menuForm.pid":function(e){this._reset(e)}},mounted:function(){this.seach_query()},methods:Object(a["a"])(Object(a["a"])({},Object(r["b"])("system",["getList","preservation","menusRome","menusState"])),{},{seach_query:function(){var e=this;return Object(c["a"])(Object(i["a"])().mark((function o(){var n,t;return Object(i["a"])().wrap((function(o){while(1)switch(o.prev=o.next){case 0:return Object(s["d"])(!0),o.next=3,e.getList(Object(a["a"])({},e.queryInfo));case 3:n=o.sent,t=n.data,e.menuData=Object(v["f"])(t),e.menuTree=Object(v["a"])(Object(v["f"])(t)),e.tableData=Object(v["a"])(t,!1);case 8:case"end":return o.stop()}}),o)})))()},modify:function(e){var o=this;return Object(c["a"])(Object(i["a"])().mark((function n(){var t;return Object(i["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:o.menuForm=Object(a["a"])({},e),o.dialogData.parent=!1,o.dialogVisible=!0,o.dialogData.title="修改",1==e.pid?o.$set(o.menuForm,"parent_name","主目录"):(t=o.menuData.filter((function(o){return o.id===e.pid})),o.$set(o.menuForm,"parent_name",t[0].title));case 5:case"end":return n.stop()}}),n)})))()},changeEna:function(e){var o=this;return Object(c["a"])(Object(i["a"])().mark((function n(){return Object(i["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,o.menusState({code:e.id});case 2:o.seach_query();case 3:case"end":return n.stop()}}),n)})))()},showDialogAdd:function(e){var o=this;return Object(c["a"])(Object(i["a"])().mark((function n(){return Object(i["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:o.$set(o.menuForm,"pid",1),o.$set(o.menuForm,"parent_name","主目录"),o.dialogData.parent=!1,e&&(o.$set(o.menuForm,"pid",e.id),o.$set(o.menuForm,"parent_name",e.title),o.$set(o.menuForm,"lever",e.lever),o.dialogData.parent=!0),o.menuForm.state=!0,o.menuForm.menuClass=1,o.dialogVisible=!0;case 7:case"end":return n.stop()}}),n)})))()},menuForm_serve:function(){var e=this;this.$refs["menuForm"].validate(function(){var o=Object(c["a"])(Object(i["a"])().mark((function o(n){return Object(i["a"])().wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(n){o.next=2;break}return o.abrupt("return",!1);case 2:return Object(s["d"])("正在保存"),e.menuForm.orgID=g["a"].state["user"].userInfo.orgID,e.menuForm.code=e.menuForm.id,e.menuForm.menuType=e.menuForm.lever,e.menuForm.sort=e.menuForm.orderNum,e.menuForm.menuPid=e.menuForm.pid,e.menuForm.menuName=e.menuForm.title,e.menuForm.menuDesc=e.menuForm.title,e.menuForm.menuPath=e.menuForm.path,o.next=13,e.preservation(Object(a["a"])({},e.menuForm));case 13:e.handleClose();case 14:case"end":return o.stop()}}),o)})));return function(e){return o.apply(this,arguments)}}())},getAllIds:function(e){var o=this,n="";return e.id&&(n=e.id+","),e.children&&e.children.length>0&&e.children.forEach((function(e){n+=o.getAllIds(e)+","})),n},romeMenu:function(e){var o=this;Object(s["a"])("确定删除此目录及其子目录吗?","警告",{ok:function(){var n=Object(c["a"])(Object(i["a"])().mark((function n(){return Object(i["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return Object(s["d"])("正在删除"),n.next=3,o.menusRome({codes:o.getAllIds(e)});case 3:o.seach_query();case 4:case"end":return n.stop()}}),n)})));function t(){return n.apply(this,arguments)}return t}()})},_reset:function(e){var o=this;this.$nextTick((function(){e?o.$refs["el-select-tree"].setCheckedKeys([e]):o.$refs["el-select-tree"].setCheckedKeys([])}))},_check:function(e,o){console.log(e,o),this.$set(this.menuForm,"pid",e.id),this.$set(this.menuForm,"parent_name",e.title),this.$set(this.menuForm,"lever",e.lever),this.$refs["el-tree-select"].blur()},handleClose:function(){var e=this;this.menuForm={},this.$refs["menuForm"].resetFields(),this.$nextTick((function(){e.dialogVisible=!1,e.seach_query()}))},reset_query:function(){this.queryInfo={params:{orgID:g["a"].state["user"].userInfo.orgID},limit:9999,offset:1}},inputNamber:function(e){/\d/.test(e.key)||"Backspace"==e.key||(e.returnValue=!1)}})},y=k,w=n("2877"),F=Object(w["a"])(y,t,l,!1,null,null,null);o["default"]=F.exports}}]);