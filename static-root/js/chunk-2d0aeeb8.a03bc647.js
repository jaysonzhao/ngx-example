(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0aeeb8"],{"0bb2":function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:e.title,center:"",visible:e.show,width:"30%",top:"5%","close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":e.handleClose},on:{"update:visible":function(t){e.show=t}}},[t("el-input",{attrs:{placeholder:"输入关键字进行过滤",size:"small"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),t("el-checkbox",{on:{change:function(t){return e.handleCheckedTreeNodeAll(t)}},model:{value:e.menuNodeAll,callback:function(t){e.menuNodeAll=t},expression:"menuNodeAll"}},[e._v("全选/全不选")]),t("el-scrollbar",{staticStyle:{height:"60vh"}},[t("el-tree",{ref:"tree",attrs:{data:e.menuList,"show-checkbox":"","node-key":"id",props:e.defaultProps,"default-expanded-keys":e.expandedKeys,"check-strictly":"","filter-node-method":e.filterNode}})],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e._sever}},[e._v("确 定")])],1)],1)},r=[],o=n("c7eb"),l=n("2909"),c=n("1da1"),a=n("5530"),i=(n("4de4"),n("d81d"),n("d3b7"),n("25f0"),n("2f62")),d=n("562c"),u=n("ed08"),f=n("4360"),h={name:"",props:{show:{type:Boolean,default:!1},row:{type:Object,default:function(){}},title:{type:String,default:"角色权限"}},data:function(){return{menuList:[],filterText:"",defaultProps:{children:"children",label:"title"},menuNodeAll:!1,menuOptions:[],expandedKeys:[]}},computed:{},watch:{filterText:function(e){this.$refs.tree.filter(e)}},mounted:function(){this.init()},methods:Object(a["a"])(Object(a["a"])({},Object(i["b"])("system",["getList","rolesSeve"])),{},{init:function(){var e=this;return Object(c["a"])(Object(o["a"])().mark((function t(){var n,s,r;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object(u["d"])(!0),t.next=3,e.getList({params:{orgID:f["a"].state["user"].userInfo.orgID},limit:9999,offset:1});case 3:return n=t.sent,s=n.data,e.menuOptions=Object(l["a"])(s),e.menuList=Object(d["a"])(s,!1),t.next=9,f["a"].dispatch("user/getUserRoles",e.row.code);case 9:r=t.sent,e.expandedKeys=r.treeMenus.map((function(e){return e.id})),e.$refs.tree.setCheckedKeys(Object(l["a"])(e.expandedKeys));case 12:case"end":return t.stop()}}),t)})))()},handleCheckedTreeNodeAll:function(e){this.$refs.tree.setCheckedNodes(e?this.menuOptions:[])},filterNode:function(e,t){return!e||-1!==t.title.indexOf(e)},_sever:function(){var e=this;return Object(c["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object(u["d"])("正在保存"),t.next=3,e.rolesSeve({code:e.row.code,menus:e.$refs.tree.getCheckedKeys().toString()});case 3:e.handleClose();case 4:case"end":return t.stop()}}),t)})))()},handleClose:function(){this.$refs.tree.setCheckedKeys([]),this.expandedKeys=[],this.$emit("_close")}})},p=h,b=n("2877"),m=Object(b["a"])(p,s,r,!1,null,null,null);t["default"]=m.exports}}]);